(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-537e39dc"],{2909:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var a=n("6b75");function i(t){if(Array.isArray(t))return Object(a["a"])(t)}n("a4d3"),n("e01a"),n("d28b"),n("a630"),n("d3b7"),n("3ca3"),n("ddb0");function r(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}var o=n("06c5");function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(t){return i(t)||r(t)||Object(o["a"])(t)||l()}},"2ca0":function(t,e,n){"use strict";var a=n("23e7"),i=n("06cf").f,r=n("50c4"),o=n("5a34"),l=n("1d80"),s=n("ab13"),c=n("c430"),u="".startsWith,d=Math.min,m=s("startsWith"),p=!c&&!m&&!!function(){var t=i(String.prototype,"startsWith");return t&&!t.writable}();a({target:"String",proto:!0,forced:!p&&!m},{startsWith:function(t){var e=String(l(this));o(t);var n=r(d(arguments.length>1?arguments[1]:void 0,e.length)),a=String(t);return u?u.call(e,a,n):e.slice(n,n+a.length)===a}})},"498a":function(t,e,n){"use strict";var a=n("23e7"),i=n("58a8").trim,r=n("c8d2");a({target:"String",proto:!0,forced:r("trim")},{trim:function(){return i(this)}})},"4b85":function(t,e,n){"use strict";n("8e98")},8701:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"page-header"},[n("h3",{staticClass:"page-title"},[n("div",{staticClass:"page-header__summary"},[t._m(0),n("div",{staticClass:"page-header__summary-item"},[n("span",[t._v(t._s(t.getCurrentCompany))]),n("span",[t._v("Hesap Ekstresi ("+t._s(t.filteredData.length)+")")])])]),n("div",[n("el-button",{attrs:{type:"success",size:"medium",icon:"el-icon-circle-plus",disabled:t.disableAdd},on:{click:function(e){return t.newRecord(0)}}},[t._v("Satış")]),n("el-button",{attrs:{type:"success",size:"medium",icon:"el-icon-circle-plus",disabled:t.disableAdd},on:{click:function(e){return t.newRecord(1)}}},[t._v("Tahsilat")]),n("el-button",{attrs:{type:"info",size:"medium",icon:"el-icon-printer",disabled:!t.filteredData.length},on:{click:t.exportExtract}},[t._v("Dışa Aktar")])],1)])]),n("div",{staticClass:"card"},[n("div",{staticClass:"card-body"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-2 col-sm-4 col-md-3 mb-3 pl-1 ml-3"},[n("el-date-picker",{staticClass:"w-full",attrs:{type:"daterange","range-separator":"-","start-placeholder":"İşlem Başlangıç","end-placeholder":"İşlem Bitiş",format:"dd/MM/yyyy",placeholder:"",disabled:t.filter.collectionDate},on:{change:t.changeDate},model:{value:t.filter.transactionDate,callback:function(e){t.$set(t.filter,"transactionDate",e)},expression:"filter.transactionDate"}})],1),n("div",{staticClass:"col-2 col-sm-4 col-md-3 mt-3 pl-0"},[n("el-radio-group",{attrs:{size:"small"},model:{value:t.filter.transactionType,callback:function(e){t.$set(t.filter,"transactionType",e)},expression:"filter.transactionType"}},[n("el-radio",{attrs:{label:0}},[t._v("Satış")]),n("el-radio",{attrs:{label:1}},[t._v("Tahsilat")]),n("el-radio",{attrs:{label:null}},[t._v("Tümü")])],1)],1),t._m(1),n("div",{staticClass:"col-12 grid-margin"},[n("el-table",{ref:"mainTable",staticStyle:{width:"100%"},attrs:{data:t.paginatedData,border:"","show-summary":"","summary-method":t.getSummaries,"empty-text":"Ekstre bulunamadı"}},[n("el-table-column",{attrs:{prop:"transactionDate",label:"İşlem Tarihi",width:"120",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("formatDate")(e.row.transactionDate)))]}}])}),n("el-table-column",{attrs:{prop:"transactionType",label:"İşlem Türü",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.transactionType?n("label",{staticClass:"badge badge-gradient-success"},[t._v("Tahsilat")]):n("label",{staticClass:"badge badge-gradient-info"},[t._v("Satış")])]}}])}),n("el-table-column",{attrs:{prop:"sellAmount",label:"Satış Tutarı",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return["temp"==e.row.id&&0===e.row.transactionType?[n("price-input",{attrs:{decimals:2,min:0,size:"mini"},model:{value:e.row.sellAmount,callback:function(n){t.$set(e.row,"sellAmount",n)},expression:"scope.row.sellAmount"}})]:"temp"==e.row.id&&1===e.row.transactionType?[t._v("-")]:e.row.isEditing&&0===e.row.transactionType?[n("price-input",{attrs:{decimals:2,min:0,size:"mini",placeholder:t.currentRow.placeholder},model:{value:t.currentRow.sellAmount,callback:function(e){t.$set(t.currentRow,"sellAmount",e)},expression:"currentRow.sellAmount"}})]:[e.row.transactionType?n("span",[t._v("-")]):n("span",[t._v(t._s(t._f("formatNumber")(e.row.sellAmount)))])]]}}])}),n("el-table-column",{attrs:{prop:"collectionAmount",label:"Tahsilat Tutarı",width:"137"},scopedSlots:t._u([{key:"default",fn:function(e){return["temp"==e.row.id&&1===e.row.transactionType?[n("price-input",{attrs:{decimals:2,min:0,size:"mini"},model:{value:e.row.collectionAmount,callback:function(n){t.$set(e.row,"collectionAmount",n)},expression:"scope.row.collectionAmount"}})]:"temp"==e.row.id&&0===e.row.transactionType?[t._v("-")]:e.row.isEditing&&1===e.row.transactionType?[n("price-input",{attrs:{decimals:2,min:0,size:"mini",placeholder:t.currentRow.placeholder},model:{value:t.currentRow.collectionAmount,callback:function(e){t.$set(t.currentRow,"collectionAmount",e)},expression:"currentRow.collectionAmount"}})]:[e.row.transactionType?n("span",[t._v(t._s(t._f("formatNumber")(e.row.collectionAmount)))]):n("span",[t._v("-")])]]}}])}),n("el-table-column",{attrs:{prop:"collectionType",label:"Tahsilat Türü",width:"145"},scopedSlots:t._u([{key:"default",fn:function(e){return["temp"==e.row.id&&1===e.row.transactionType?[n("el-select",{attrs:{filterable:"",clearable:""},model:{value:e.row.collectionType,callback:function(n){t.$set(e.row,"collectionType",n)},expression:"scope.row.collectionType"}},t._l(t.collectionTypeList,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)]:e.row.isEditing?[n("el-select",{attrs:{filterable:"",clearable:""},model:{value:t.currentRow.collectionType,callback:function(e){t.$set(t.currentRow,"collectionType",e)},expression:"currentRow.collectionType"}},t._l(t.collectionTypeList,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)]:[t._v(" "+t._s(e.row.collectionType?e.row.collectionType:"-")+" ")]]}}])}),n("el-table-column",{attrs:{prop:"note",label:"Açıklama"},scopedSlots:t._u([{key:"default",fn:function(e){return["temp"==e.row.id?[n("el-input",{staticClass:"no-resize-textarea",attrs:{type:"textarea",placeholder:"Açıklama girin",autosize:!1},model:{value:e.row.note,callback:function(n){t.$set(e.row,"note",n)},expression:"scope.row.note"}})]:e.row.isEditing?[n("el-input",{staticClass:"no-resize-textarea",attrs:{type:"textarea",placeholder:"Açıklama girin",autosize:!1},model:{value:t.currentRow.note,callback:function(e){t.$set(t.currentRow,"note",e)},expression:"currentRow.note"}})]:[n("div",[t._v(t._s(e.row.note))])]]}}])}),n("el-table-column",{attrs:{fixed:"right",label:"İşlem",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return["temp"==e.row.id?n("el-button",{attrs:{type:"success",size:"small",icon:"el-icon-check",circle:"",disabled:t.checkValidation(e.row)},on:{click:function(n){return t.saveTempRow(e.row)}}}):e.row.isEditing?n("el-button",{attrs:{type:"success",size:"small",icon:"el-icon-check",circle:""},on:{click:function(n){return t.saveChanges(e.row)}}}):n("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-edit",circle:""},on:{click:function(n){return t.editRow(e.row)}}}),"temp"==e.row.id||e.row.isEditing?n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-close",circle:""},on:{click:function(n){return t.cancelTempRow(e.row)}}}):n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",circle:"",disabled:e.row.totalOutputWeight>0},on:{click:function(n){return t.open(e.row)}}})]}}])})],1),n("el-pagination",{staticStyle:{"margin-top":"20px","text-align":"center"},attrs:{background:"",layout:"prev, pager, next",total:t.filteredData.length,"page-size":t.pageSize,"current-page":t.currentPage},on:{"current-change":t.handlePageChange}})],1)])])]),n("div",{staticStyle:{display:"none"},attrs:{id:"print-area"}},[n("table",{staticClass:"print-table"},[t._m(2),n("tbody",t._l(t.getRouteList,(function(e){return n("tr",{key:e.companyName},[n("td",[t._v(t._s(e.companyName))]),n("td",[t._v(t._s(e.createdDate))]),n("td",[t._v(t._s(e.sellAmount))]),n("td",[t._v(t._s(e.collectionDate))]),n("td",[t._v(t._s(e.collectionAmount))]),n("td",[t._v(t._s(t._f("formatNumber")(e.remaining)))]),n("td",[t._v(t._s(e.currentDebt))])])})),0)])]),n("el-dialog",{attrs:{title:t.getPopupTitle,visible:t.dialogVisible,width:"37%"},on:{"update:visible":function(e){t.dialogVisible=e},close:t.closePopup}},[n("el-form",{attrs:{"label-position":"top",model:t.formData,"label-width":"100px"}},[n("h4",{staticClass:"mb-3"}),n("hr"),n("el-row",{attrs:{gutter:16}},[n("el-col",{attrs:{span:12}},[n("el-form-item",{staticClass:"picker-width",attrs:{label:"İşlem Tarihi"}},[n("el-date-picker",{attrs:{type:"date",format:"dd.MM.yyyy",placeholder:""},model:{value:t.filter.transactionDate,callback:function(e){t.$set(t.filter,"transactionDate",e)},expression:"filter.transactionDate"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"Satış Tutarı"}},[n("price-input",{attrs:{decimals:2,min:0},model:{value:t.formData.sellAmount,callback:function(e){t.$set(t.formData,"sellAmount",e)},expression:"formData.sellAmount"}})],1)],1)],1),n("el-row",{attrs:{gutter:16}},[n("el-col",{attrs:{span:12}},[n("el-form-item",{staticClass:"picker-width",attrs:{label:"Tahsilat Tarihi"}},[n("el-date-picker",{attrs:{type:"date",format:"dd.MM.yyyy",placeholder:""},model:{value:t.filter.collectionDate,callback:function(e){t.$set(t.filter,"collectionDate",e)},expression:"filter.collectionDate"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"Tahsil Edilen"}},[n("price-input",{attrs:{decimals:2,min:0},model:{value:t.formData.collectionAmount,callback:function(e){t.$set(t.formData,"collectionAmount",e)},expression:"formData.collectionAmount"}})],1)],1)],1),n("el-row",{attrs:{gutter:16}},[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"Devreden Borç"}},[n("price-input",{attrs:{decimals:2,min:0,disabled:!t.checkOutstandingDebt},model:{value:t.formData.outstandingDebt,callback:function(e){t.$set(t.formData,"outstandingDebt",e)},expression:"formData.outstandingDebt"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"İşlemden Kalan Borç"}},[n("price-input",{attrs:{value:t.calcRemaining,disabled:""}})],1)],1)],1),n("el-row",{attrs:{gutter:16}},[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"Not",prop:"note"}},[n("el-input",{staticClass:"no-resize-textarea",attrs:{type:"textarea",placeholder:"Açıklama girin",autosize:!1},model:{value:t.formData.note,callback:function(e){t.$set(t.formData,"note",e)},expression:"formData.note"}})],1)],1),n("el-col",{attrs:{span:12}},[n("h4",{staticClass:"total-debt"},[n("div",[n("strong",[t._v("Toplam Borç:")]),t.formData.outstandingDebt>0?n("p",{staticClass:"text-xsmall mb-0 absolute"},[t._v("(Devreden borç dahil edilmiştir.)")]):t._e()]),t._v(" "+t._s(t._f("formatNumber")(t.getTotalDebt))+"₺")])])],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("Vazgeç")]),n("el-button",{attrs:{type:"primary"}},[t._v("Kaydet")])],1)],1)],1)},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"page-title-icon bg-gradient-success text-white mr-2"},[n("i",{staticClass:"mdi mdi-file-document menu-icon"})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"col-3 col-sm-3 col-md-3 mt-3 ml-auto"},[n("div",{staticClass:"d-flex justify-content-end"},[n("h4",{staticClass:"text-lg"},[t._v("Toplam Borç:")]),n("span",{staticClass:"ml-2",staticStyle:{"font-size":"18px"}},[t._v("1.005.450,00 ₺")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th",[t._v("Firma")]),n("th",[t._v("İşlem Tarihi")]),n("th",[t._v("Satış Tutarı")]),n("th",[t._v("Tahs. Tarihi")]),n("th",[t._v("Tahs. Tutarı")]),n("th",[t._v("Önceki Borç")]),n("th",[t._v("Güncel Borç")])])])}],r=(n("99af"),n("4de4"),n("7db0"),n("4160"),n("caad"),n("a15b"),n("d81d"),n("13d5"),n("fb6a"),n("a434"),n("a9e3"),n("d3b7"),n("ac1f"),n("2532"),n("841c"),n("159b"),n("96cf"),n("1da1")),o=n("3835"),l=n("2909");n("a4d3"),n("e01a"),n("d28b"),n("3ca3"),n("ddb0");function s(t){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}var c=n("5530"),u=n("e81b"),d=n("5600"),m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-input",{attrs:{value:t.display,clearable:"",disabled:t.disabled},on:{input:t.handleInput,blur:t.handleBlur,focus:t.handleFocus}},[t.postfix?n("div",[n("template",{slot:"append"},[t._v("₺")])],2):t._e()])},p=[],f=(n("c975"),n("baa5"),n("b680"),n("5319"),n("1276"),n("2ca0"),n("498a"),{name:"PriceInput",props:{value:{type:[Number,String],default:0},decimals:{type:Number,default:2},min:{type:Number,default:0},disabled:{type:Boolean,default:!1},postfix:{type:Boolean,default:!0},placeholder:{type:[String,Number]}},data:function(){return{display:"",isFocused:!1}},watch:{value:{immediate:!0,handler:function(t){if(!this.isFocused){var e=this.normalizeToNumber(t);this.display=this.formatForDisplay(e)}}}},methods:{sanitizeInput:function(t){if(null==t)return"";t=String(t).replace(/[^\d.,]/g,""),t=t.replace(/,/g,".");var e=t.indexOf(".");if(-1!==e){var n=t.slice(0,e+1),a=t.slice(e+1).replace(/\./g,"");t=n+a}var i=t.split(".");return 2===i.length&&(i[1]=i[1].slice(0,this.decimals),t=i[0]+"."+i[1]),t=t.replace(/^0+(\d)/,"$1"),t},normalizeToNumber:function(t){if(""===t||null==t)return 0;if("number"===typeof t)return t;var e=String(t).trim(),n=e.lastIndexOf(","),a=e.lastIndexOf(".");e=n>a?e.replace(/\./g,"").replace(",","."):e.replace(/,/g,"");var i=parseFloat(e);return isNaN(i)?0:i},clamp:function(t){return t<this.min?this.min:t},handleInput:function(t){var e=this.sanitizeInput(t),n=this.clamp(Number(e||0));this.$emit("input",Number(n.toFixed(this.decimals))),this.display=e},handleFocus:function(){this.isFocused=!0;var t=this.normalizeToNumber(this.value);this.display=t?String(t.toFixed(this.decimals)).replace(/\.?0+$/,(function(t){return t.startsWith(".")?"."+t.slice(1):""})):""},handleBlur:function(){this.isFocused=!1;var t=this.normalizeToNumber(this.display),e=this.clamp(t);this.$emit("input",Number(e.toFixed(this.decimals))),this.$emit("blur"),this.$emit("change",Number(e.toFixed(this.decimals))),this.display=this.formatForDisplay(e)},formatForDisplay:function(t){t=t||this.placeholder;var e=Number(isNaN(t)?0:t);return new Intl.NumberFormat("tr-TR",{minimumFractionDigits:this.decimals,maximumFractionDigits:this.decimals}).format(e)}}}),h=f,b=n("2877"),g=Object(b["a"])(h,m,p,!1,null,null,null),v=g.exports,y=n("3106"),w=n("e499"),T=n.n(w),D=n("4ebb"),x=n.n(D),_=n("9d64"),A=n.n(_);T.a.vfs=x.a.pdfMake.vfs;var C={name:"Customers",mixins:[y["a"]],components:{PriceInput:v},data:function(){return{pageSize:9,currentPage:1,currentCustomer:{id:null,currentCompany:""},dialogVisible:!1,filter:{transactionType:null,transactionDate:"",search:"",group:"",groupForRoute:"",visitType:"Tümü"},tempRow:null,disableAdd:!1,collectionTypeList:[{label:"Nakit",value:"NAKIT"},{label:"Kredi Kartı",value:"KREDI"},{label:"Havale/EFT",value:"HAVALE"}],exportTableData:[],tempTransactionId:null,isEditMode:!1,currentRow:{},transactions:[],currentRemaining:0,isTransactionsDetail:!1,formData:{companyName:"",fullName:"",transactionDate:null,sellAmount:0,collectionAmount:0,collectionDate:null,remaining:0,note:""}}},mounted:function(){var t=this,e=this.$route.query,n=e.q,a=e.cn;if(this.currentCustomer.id=n,this.currentCustomer.currentCompany=a,Array.isArray(u))if(this.currentCustomer.id){var i,r,o=u.find((function(e){return String(e.customerId)===String(t.currentCustomer.id)}));if(o)this.transactions=(o.transactions||[]).map((function(t){return Object(c["a"])(Object(c["a"])({},t),{},{isEditing:!1})})),this.currentRemaining=o.remaining||0;else this.transactions=((null===(i=u[0])||void 0===i?void 0:i.transactions)||[]).map((function(t){return Object(c["a"])(Object(c["a"])({},t),{},{isEditing:!1})})),this.currentRemaining=(null===(r=u[0])||void 0===r?void 0:r.remaining)||0}else{var l,d;this.transactions=((null===(l=u[0])||void 0===l?void 0:l.transactions)||[]).map((function(t){return Object(c["a"])(Object(c["a"])({},t),{},{isEditing:!1})})),this.currentRemaining=(null===(d=u[0])||void 0===d?void 0:d.remaining)||0}else u&&"object"===s(u)?(this.transactions=(u.transactions||[]).map((function(t){return Object(c["a"])(Object(c["a"])({},t),{},{isEditing:!1})})),this.currentRemaining=u.remaining||0):(this.transactions=[],this.currentRemaining=0)},computed:{getPopupTitle:function(){return this.isEditMode?"Hareketi Düzenle":"Yeni Satış Oluştur"},getTransactionList:function(){return this.transactions||[]},getCurrentRemaining:function(){return u.remaining},checkOutstandingDebt:function(){return this.isEditMode?!this.isTransactionsDetail:""},paginatedData:function(){var t=this.filteredData||[],e=this.tempRow?[this.tempRow].concat(Object(l["a"])(t)):t,n=(this.currentPage-1)*this.pageSize,a=n+this.pageSize;return e.slice(n,a)},checkValidation:function(){return function(t){return 0==t.transactionType?!t.sellAmount:0==t.collectionAmount||null==t.collectionType}},getRouteList:function(){var t=this;return this.exportTableData.filter((function(e){return(!t.filter.groupForRoute||e.group===Number(t.filter.groupForRoute))&&(1!==t.filter.visitType||e.remaining>0)}))},todayGroupNumber:function(){var t=(new Date).getDay();return 0===t?null:t},filteredData:function(){var t=this,e=this.getTransactionList||[];if(null!==this.filter.transactionType&&void 0!==this.filter.transactionType&&(e=e.filter((function(e){return Number(e.transactionType)===Number(t.filter.transactionType)}))),this.filter.transactionDate&&Array.isArray(this.filter.transactionDate)&&2===this.filter.transactionDate.length){var n=Object(o["a"])(this.filter.transactionDate,2),a=n[0],i=n[1],r=a?new Date(a):null,l=i?new Date(i):null;if(r&&!isNaN(r.getTime())&&l&&!isNaN(l.getTime())){var s=new Date(r.setHours(0,0,0,0)).getTime(),c=new Date(l.setHours(23,59,59,999)).getTime();e=e.filter((function(t){if(!t.transactionDate)return!1;var e=new Date(t.transactionDate);if(isNaN(e.getTime()))return!1;var n=e.getTime();return n>=s&&n<=c}))}}if(!this.filter.search)return e;var u=this.filter.search.toLowerCase();return e.filter((function(t){return"".concat(t.note).toLowerCase().includes(u)}))},calcRemaining:function(){return this.formData.sellAmount-this.formData.collectionAmount},getTotalDebt:function(){return this.calcRemaining+this.formData.outstandingDebt},getCurrentCompany:function(){return this.currentCustomer.currentCompany}},methods:{changeDate:function(t){this.currentPage=1,this.filter.transactionDate=t.map((function(t){var e=new Date(t);return e.setHours(12,0,0,0),e}))},exportExtract:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n,a,i,o,l,s,c,u,d,m,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return c=function(){return c=Object(r["a"])(regeneratorRuntime.mark((function t(e){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch(e);case 2:return n=t.sent,t.next=5,n.blob();case 5:return a=t.sent,t.next=8,new Promise((function(t){var e=new FileReader;e.onloadend=function(){return t(e.result)},e.readAsDataURL(a)}));case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t)}))),c.apply(this,arguments)},s=function(t){return c.apply(this,arguments)},a=t.filteredData,i=null===a||void 0===a?void 0:a.reduce((function(t,e){return e.sellAmount+t}),0),o=null===a||void 0===a?void 0:a.reduce((function(t,e){return e.collectionAmount+t}),0),l=[[{text:"İşlem Tarihi",bold:!0},{text:"İşlem Türü",bold:!0},{text:"Satış Tutarı",bold:!0},{text:"Tahs. Tutarı",bold:!0},{text:"Tahsilat Türü",bold:!0}]],a.forEach((function(e){l.push([{text:t.$options.filters.formatDate(e.transactionDate)},{text:e.transactionType?"Tahsilat":"Satış"},{text:e.transactionType?"-":t.$options.filters.formatNumber(e.sellAmount)},{text:e.transactionType?t.$options.filters.formatNumber(e.collectionAmount):"-"},{text:e.collectionType}])})),l.push([{text:" ",colSpan:5}," "," "," "," "]),l.push(["",{text:"Toplam:",alignment:"left",bold:!0,fillColor:"#ddd"},{text:"".concat(t.$options.filters.formatNumber(i)," ₺"),bold:!0},{text:"".concat(t.$options.filters.formatNumber(o)," ₺"),bold:!0},{text:"Kalan: ".concat(t.$options.filters.formatNumber(i-o)," ₺"),bold:!0,fillColor:"#ddd"}]),e.next=11,s(A.a);case 11:u=e.sent,d={content:[{image:u,width:150,alignment:"center",margin:[0,-20,0,0]},{text:"[".concat(t.currentCustomer.currentCompany," - Ekstre]"),style:"zoneName"},{table:{headerRows:1,widths:[80,80,80,80,"*"],body:l},layout:{fillColor:function(t){return 0===t?"#CCCCCC":null}},fontSize:10}],styles:{header:{bold:!1,margin:[-30,0,-30,10],alignment:"center"},zoneName:{bold:!0,margin:[0,0,0,10],alignment:"left"}}},(null===(n=t.filter.transactionDate)||void 0===n?void 0:n.length)&&(m=null===(p=t.filter.transactionDate)||void 0===p?void 0:p.map((function(e){return t.$options.filters.formatDate(e)})).join(" - "),d.content.splice(2,0,{text:"[".concat(m,"]"),style:"zoneName"})),T.a.createPdf(d).open();case 15:case"end":return e.stop()}}),e)})))()},handlePageChange:function(t){this.currentPage=t},cancelTempRow:function(t){this.tempRow=null,this.disableAdd=!1,t.isEditing=!1},saveChanges:function(t){t.isEditing=!1,this.$notify.success({title:"Başarılı",message:"İşlem Gerçekleştirildi"})},editRow:function(t){this.getTransactionList.forEach((function(t){return t.isEditing=!1})),t.isEditing=!0,this.currentRow=t.transactionType?{collectionAmount:null,collectionType:t.collectionType,placeholder:t.collectionAmount,note:t.note}:{sellAmount:null,placeholder:t.sellAmount,note:t.note}},newRecord:function(t){this.tempRow||(this.disableAdd=!0,this.tempRow={id:"temp",companyId:this.currentCustomer.id,companyName:"",sellAmount:0,fullName:"",collectionAmount:0,transactionType:t?1:0,amount:null,description:"",transactionDate:(new Date).toISOString(),remaining:null,collectionType:null,collectionTypeName:""})},saveTempRow:function(t){var e=Math.floor(999999*Math.random()),n=Object(c["a"])(Object(c["a"])({},t),{},{id:e,isEditing:!1,collectionTypeName:1===t.transactionType?0===t.collectionType?"Nakit":"Kredi Kartı":""});this.transactions.unshift(n),localStorage.setItem("payload",n),this.$notify.success({title:"Başarılı",message:"İşlem Gerçekleştirildi"}),this.tempRow=null,this.disableAdd=!1},closePopup:function(){this.dialogVisible=!1},isOpenDialog:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.isEditMode="edit"===t,this.isTransactionsDetail=n,this.isEditMode?this.fillForm(e):this.resetFormData(),this.formData.companyName=e.companyName||"",this.dialogVisible=!0},resetFormData:function(){this.formData={companyName:"",fullName:"",transactionDate:null,sellAmount:0,collectionAmount:0,collectionDate:null,remaining:0,outstandingDebt:0,note:""}},fillForm:function(t){this.formData=Object(c["a"])(Object(c["a"])({},this.formData),t)},getSummaries:function(t){var e,n=this,a=t.columns,i=[],r=Number((null===(e=this.filteredData[this.filteredData.length-1])||void 0===e?void 0:e.remaining)||0);return a.forEach((function(t,e){if(0!==e){var a=null===t||void 0===t?void 0:t.property,o=a&&(a.includes("sellAmount")||a.includes("collectionAmount")||a.includes("remaining"));if(o){if("remaining"===a)return void(i[e]=Object(d["d"])(r)+" ₺");var l=n.filteredData.reduce((function(t,e){var n=Number(e[a]);return isNaN(n)?t:t+n}),0);i[e]=Object(d["d"])(l)+" ₺"}else i[e]=""}else i[e]="Toplam:"})),i},getSummariesRoute:function(t){var e=this,n=t.columns,a=[];return n.forEach((function(t,n){if(0!==n){var i=(null===t||void 0===t?void 0:t.property)&&t.property.includes("remaining");if(i){var r,o=null===(r=e.getRouteList)||void 0===r?void 0:r.map((function(e){return Number(e[t.property])})),l=null===o||void 0===o?void 0:o.reduce((function(t,e){var n=Number(e);return isNaN(n)?t:t+n}),0);a[n]=Object(d["d"])(l)+" ₺"}else a[n]=""}else a[n]="Toplam"})),a}},watch:{$route:{handler:function(t){var e;(null===(e=t.query)||void 0===e?void 0:e.q)?this.currentCustomer.id=t.query.q:this.currentCustomer.id=null},immediate:!0,deep:!0}}},k=C,N=(n("4b85"),Object(b["a"])(k,a,i,!1,null,"197b03d4",null));e["default"]=N.exports},"8e98":function(t,e,n){},a434:function(t,e,n){"use strict";var a=n("23e7"),i=n("23cb"),r=n("a691"),o=n("50c4"),l=n("7b0b"),s=n("65f0"),c=n("8418"),u=n("1dde"),d=n("ae40"),m=u("splice"),p=d("splice",{ACCESSORS:!0,0:0,1:2}),f=Math.max,h=Math.min,b=9007199254740991,g="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!m||!p},{splice:function(t,e){var n,a,u,d,m,p,v=l(this),y=o(v.length),w=i(t,y),T=arguments.length;if(0===T?n=a=0:1===T?(n=0,a=y-w):(n=T-2,a=h(f(r(e),0),y-w)),y+n-a>b)throw TypeError(g);for(u=s(v,a),d=0;d<a;d++)m=w+d,m in v&&c(u,d,v[m]);if(u.length=a,n<a){for(d=w;d<y-a;d++)m=d+a,p=d+n,m in v?v[p]=v[m]:delete v[p];for(d=y;d>y-a+n;d--)delete v[d-1]}else if(n>a)for(d=y-a;d>w;d--)m=d+a-1,p=d+n-1,m in v?v[p]=v[m]:delete v[p];for(d=0;d<n;d++)v[d+w]=arguments[d+2];return v.length=y-a+n,u}})},baa5:function(t,e,n){var a=n("23e7"),i=n("e58c");a({target:"Array",proto:!0,forced:i!==[].lastIndexOf},{lastIndexOf:i})},c8d2:function(t,e,n){var a=n("d039"),i=n("5899"),r="​᠎";t.exports=function(t){return a((function(){return!!i[t]()||r[t]()!=r||i[t].name!==t}))}},c975:function(t,e,n){"use strict";var a=n("23e7"),i=n("4d64").indexOf,r=n("a640"),o=n("ae40"),l=[].indexOf,s=!!l&&1/[1].indexOf(1,-0)<0,c=r("indexOf"),u=o("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:s||!c||!u},{indexOf:function(t){return s?l.apply(this,arguments)||0:i(this,t,arguments.length>1?arguments[1]:void 0)}})},e58c:function(t,e,n){"use strict";var a=n("fc6a"),i=n("a691"),r=n("50c4"),o=n("a640"),l=n("ae40"),s=Math.min,c=[].lastIndexOf,u=!!c&&1/[1].lastIndexOf(1,-0)<0,d=o("lastIndexOf"),m=l("indexOf",{ACCESSORS:!0,1:0}),p=u||!d||!m;t.exports=p?function(t){if(u)return c.apply(this,arguments)||0;var e=a(this),n=r(e.length),o=n-1;for(arguments.length>1&&(o=s(o,i(arguments[1]))),o<0&&(o=n+o);o>=0;o--)if(o in e&&e[o]===t)return o||0;return-1}:c},e81b:function(t){t.exports=JSON.parse('{"id":1,"companyName":"Uluer İ.Ö.O","remaining":5450,"customerId":1,"transactions":[{"id":8,"transactionType":0,"transactionDate":"2025-03-07T10:30:00Z","sellAmount":4000,"collectionAmount":0,"collectionType":"-","note":"özel not"},{"id":9,"transactionType":1,"transactionDate":"2025-03-14T10:30:00Z","sellAmount":0,"collectionAmount":750,"collectionType":"Kredi Kartı","note":"özel not"},{"id":10,"transactionType":0,"transactionDate":"2025-03-21T10:30:00Z","sellAmount":3000,"collectionAmount":0,"collectionType":"-","note":"özel not"},{"id":7,"transactionType":1,"transactionDate":"2025-03-31T10:30:00Z","sellAmount":0,"collectionAmount":800,"collectionType":"Havale/EFT","note":"özel not"}]}')}}]);
//# sourceMappingURL=chunk-537e39dc.c9dd26c8.js.map